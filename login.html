<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Login</title>
<style>
  body { font-family: Arial; padding:40px; }
  input { width:100%; padding:12px; margin:10px 0; }
  button { width:100%; padding:12px; background:#072760; color:#fff; border:0; }
</style>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword } 
  from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyBh-KhkmZrS6b97MPv-YTMjU6qTF0qFzbY",
  authDomain: "pakisa-floor.firebaseapp.com",
  projectId: "pakisa-floor",
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const EDIT_USERS = [
  "ops1@pakisalogistics.co.za",
  "csd1@pakisalogistics.co.za",
  "csd@pakisalogistics.co.za",
  "ops2@pakisalogistics.co.za"
];

window.doLogin = () => {
  const email = document.getElementById("email").value;
  const pass = document.getElementById("pass").value;

  signInWithEmailAndPassword(auth, email, pass)
    .then(() => {
      if (EDIT_USERS.includes(email.toLowerCase())) {
        window.location = "floor.html?mode=edit";
      } else {
        window.location = "floor.html?mode=read";
      }
    })
    .catch(err => alert(err.message));
};
</script>
</head>

<body>
<h2>Login</h2>

<input id="email" type="email" placeholder="Email">
<input id="pass" type="password" placeholder="Password">

<button onclick="doLogin()">Login</button>

</body>
</html>
